<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
	"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
	<meta content="text/html; charset=utf-8" http-equiv="Content-Type" />

	<title>Class: Picombo::Config</title>

	<link rel="stylesheet" href="../rdoc.css" type="text/css" media="screen" />

	<script src="../js/jquery.js" type="text/javascript"
		charset="utf-8"></script>
	<script src="../js/thickbox-compressed.js" type="text/javascript"
		charset="utf-8"></script>
	<script src="../js/quicksearch.js" type="text/javascript"
		charset="utf-8"></script>
	<script src="../js/darkfish.js" type="text/javascript"
		charset="utf-8"></script>

</head>
<body class="class">

	<div id="metadata">
		<div id="home-metadata">
			<div id="home-section" class="section">
        <h3 class="section-header">
          <a href="../index.html">Home</a>
          <a href="../index.html#classes">Classes</a>
          <a href="../index.html#methods">Methods</a>
        </h3>
			</div>
		</div>

		<div id="file-metadata">
			<div id="file-list-section" class="section">
				<h3 class="section-header">In Files</h3>
				<div class="section-body">
					<ul>
					
						<li><a href="../lib/classes/config_rb.html?TB_iframe=true&amp;height=550&amp;width=785"
							class="thickbox" title="lib/classes/config.rb">lib/classes/config.rb</a></li>
					
					</ul>
				</div>
			</div>

			
		</div>

		<div id="class-metadata">

			<!-- Parent Class -->
			
			<div id="parent-class-section" class="section">
				<h3 class="section-header">Parent</h3>
				
				<p class="link">Object</p>
				
			</div>
			

			<!-- Namespace Contents -->
			

			<!-- Method Quickref -->
			
			<div id="method-list-section" class="section">
				<h3 class="section-header">Methods</h3>
				<ul class="link-list">
					
					<li><a href="#method-c-clear">::clear</a></li>
					
					<li><a href="#method-c-each">::each</a></li>
					
					<li><a href="#method-c-get">::get</a></li>
					
					<li><a href="#method-c-key_string">::key_string</a></li>
					
					<li><a href="#method-c-load">::load</a></li>
					
					<li><a href="#method-c-set">::set</a></li>
					
				</ul>
			</div>
			

			<!-- Included Modules -->
			
			<div id="includes-section" class="section">
				<h3 class="section-header">Included Modules</h3>
				<ul class="link-list">
				
				
					<li><span class="include">Enumerable</span></li>
				
				
				</ul>
			</div>
			
		</div>

		<div id="project-metadata">
			
			
			<div id="fileindex-section" class="section project-section">
				<h3 class="section-header">Files</h3>
				<ul>
				
					<li class="file"><a href="../LICENSE.html">LICENSE</a></li>
				
					<li class="file"><a href="../README.html">README</a></li>
				
					<li class="file"><a href="../Rakefile.html">Rakefile</a></li>
				
				</ul>
			</div>
			

			<div id="classindex-section" class="section project-section">
				<h3 class="section-header">Class Index
					<span class="search-toggle"><img src="../images/find.png"
						height="16" width="16" alt="[+]"
						title="show/hide quicksearch" /></span></h3>
				<form action="#" method="get" accept-charset="utf-8" class="initially-hidden">
				<fieldset>
					<legend>Quicksearch</legend>
					<input type="text" name="quicksearch" value=""
						class="quicksearch-field" />
				</fieldset>
				</form>

				<ul class="link-list">
				
					<li><a href="../Picombo.html">Picombo</a></li>
				
					<li><a href="../Picombo/Bench.html">Picombo::Bench</a></li>
				
					<li><a href="../Picombo/CLI_Request.html">Picombo::CLI_Request</a></li>
				
					<li><a href="../Picombo/CLI_Response.html">Picombo::CLI_Response</a></li>
				
					<li><a href="../Picombo/Cache.html">Picombo::Cache</a></li>
				
					<li><a href="../Picombo/Cache_File.html">Picombo::Cache_File</a></li>
				
					<li><a href="../Picombo/Config.html">Picombo::Config</a></li>
				
					<li><a href="../Picombo/Controllers.html">Picombo::Controllers</a></li>
				
					<li><a href="../Picombo/Controllers/Error_404.html">Picombo::Controllers::Error_404</a></li>
				
					<li><a href="../Picombo/Controllers/Template.html">Picombo::Controllers::Template</a></li>
				
					<li><a href="../Picombo/Cookie.html">Picombo::Cookie</a></li>
				
					<li><a href="../Picombo/Core.html">Picombo::Core</a></li>
				
					<li><a href="../Picombo/E404.html">Picombo::E404</a></li>
				
					<li><a href="../Picombo/Event.html">Picombo::Event</a></li>
				
					<li><a href="../Picombo/Html.html">Picombo::Html</a></li>
				
					<li><a href="../Picombo/Input.html">Picombo::Input</a></li>
				
					<li><a href="../Picombo/Loader.html">Picombo::Loader</a></li>
				
					<li><a href="../Picombo/Log.html">Picombo::Log</a></li>
				
					<li><a href="../Picombo/Models.html">Picombo::Models</a></li>
				
					<li><a href="../Picombo/Router.html">Picombo::Router</a></li>
				
					<li><a href="../Picombo/Session.html">Picombo::Session</a></li>
				
					<li><a href="../Picombo/Stache.html">Picombo::Stache</a></li>
				
					<li><a href="../Picombo/Stache/Bench_Footer.html">Picombo::Stache::Bench_Footer</a></li>
				
					<li><a href="../Picombo/Stache/Error_404.html">Picombo::Stache::Error_404</a></li>
				
					<li><a href="../Picombo/Url.html">Picombo::Url</a></li>
				
					<li><a href="../Mustache.html">Mustache</a></li>
				
				</ul>
				<div id="no-class-search-results" style="display: none;">No matching classes.</div>
			</div>

			
		</div>
	</div>

	<div id="documentation">
		<h1 class="class">Picombo::Config</h1>

		<div id="description">
			<h2><a href="Config.html">Config</a> Class</h2>
<p>
Handles retreiving of key value storage items
</p>
<p>
<a href="../Picombo.html">Picombo</a> uses config items internally to keep
track of common or long term configuration values. These settings are
stored in yaml files.
</p>
<h3>Overview</h3>
<p>
There are several built in config file types:
</p>
<pre>
 * config.yaml
 * cache.yaml
 * log.yaml
 * mimes.yaml
</pre>
<p>
The only file required to be in your application directory is config.yaml.
The rest of the files are defined in the system location. You can
change/overwrite the system values by creating the file in your application
directory and specifying your application values there. Please refer to the
source system files for examples.
</p>
<h3>Usage</h3>
<p>
To call config values, use the Picombo::Config.get method. The first
parameter is the path of your config value, using dot notation. With dot
notation, the first part is the filename, and everything after that is the
path inside the file.
</p>
<h4>Example</h4>
<p>
For the following file (config.yaml):
</p>
<pre>
 site_domain: localhost:3000
 protocol: http
 extensions:
   []
 hooks:
   [profiler]
</pre>
<p>
You can get the core config values like:
</p>
<p>
Picombo::Config.get(&#8216;core.protocol&#8217;)
</p>

		</div>

		<!-- Constants -->
		

		<!-- Attributes -->
		

		<!-- Methods -->
		
		<div id="public-class-method-details" class="method-section section">
			<h3 class="section-header">Public Class Methods</h3>

		
			<div id="clear-method" class="method-detail ">
				<a name="method-c-clear"></a>

				<div class="method-heading">
				
					<span class="method-name">clear</span><span
						class="method-args">(group)</span>
					<span class="method-click-advice">click to toggle source</span>
				
				</div>

				<div class="method-description">
					
					<p>
Clears the internal cache for a config file(s)
</p>
					

					
					<div class="method-source-code"
						id="clear-source">
<pre>
    <span class="ruby-comment cmt"># File lib/classes/config.rb, line 82</span>
82:         <span class="ruby-keyword kw">def</span> <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">clear</span>(<span class="ruby-identifier">group</span>)
83:             <span class="ruby-identifier">@@cache</span>.<span class="ruby-identifier">delete</span>(<span class="ruby-identifier">group</span>)
84:         <span class="ruby-keyword kw">end</span></pre>
					</div>
					
				</div>

				

				
			</div>

		
			<div id="each-method" class="method-detail ">
				<a name="method-c-each"></a>

				<div class="method-heading">
				
					<span class="method-name">each</span><span
						class="method-args">(file)</span>
					<span class="method-click-advice">click to toggle source</span>
				
				</div>

				<div class="method-description">
					
					<p>
Define an each method, required for Enumerable.
</p>
					

					
					<div class="method-source-code"
						id="each-source">
<pre>
     <span class="ruby-comment cmt"># File lib/classes/config.rb, line 112</span>
112:         <span class="ruby-keyword kw">def</span> <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">each</span>(<span class="ruby-identifier">file</span>)
113: 
114:         <span class="ruby-keyword kw">end</span></pre>
					</div>
					
				</div>

				

				
			</div>

		
			<div id="get-method" class="method-detail ">
				<a name="method-c-get"></a>

				<div class="method-heading">
				
					<span class="method-name">get</span><span
						class="method-args">(key, required = true)</span>
					<span class="method-click-advice">click to toggle source</span>
				
				</div>

				<div class="method-description">
					
					<p>
Retrieves a config item in dot notation
</p>
					

					
					<div class="method-source-code"
						id="get-source">
<pre>
    <span class="ruby-comment cmt"># File lib/classes/config.rb, line 69</span>
69:         <span class="ruby-keyword kw">def</span> <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">get</span>(<span class="ruby-identifier">key</span>, <span class="ruby-identifier">required</span> = <span class="ruby-keyword kw">true</span>)
70:             <span class="ruby-comment cmt"># get the group name from the key</span>
71:             <span class="ruby-identifier">key</span> = <span class="ruby-identifier">key</span>.<span class="ruby-identifier">split</span>(<span class="ruby-value str">'.'</span>)
72:             <span class="ruby-identifier">group</span> = <span class="ruby-identifier">key</span>.<span class="ruby-identifier">shift</span>
73: 
74:             <span class="ruby-identifier">value</span> = <span class="ruby-identifier">key_string</span>(<span class="ruby-identifier">load</span>(<span class="ruby-identifier">group</span>), <span class="ruby-identifier">key</span>.<span class="ruby-identifier">join</span>(<span class="ruby-value str">'.'</span>))
75: 
76:             <span class="ruby-identifier">raise</span> <span class="ruby-value str">&quot;Config key '&quot;</span><span class="ruby-operator">+</span><span class="ruby-identifier">key</span>.<span class="ruby-identifier">join</span>(<span class="ruby-value str">'.'</span>)<span class="ruby-operator">+</span><span class="ruby-value str">&quot;' not found!!&quot;</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">required</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-identifier">value</span>.<span class="ruby-identifier">nil?</span>
77: 
78:             <span class="ruby-identifier">value</span>
79:         <span class="ruby-keyword kw">end</span></pre>
					</div>
					
				</div>

				

				
			</div>

		
			<div id="key-string-method" class="method-detail ">
				<a name="method-c-key_string"></a>

				<div class="method-heading">
				
					<span class="method-name">key_string</span><span
						class="method-args">(hash, keys)</span>
					<span class="method-click-advice">click to toggle source</span>
				
				</div>

				<div class="method-description">
					
					<p>
Allows searching an hash by dot seperated strings
</p>
					

					
					<div class="method-source-code"
						id="key-string-source">
<pre>
     <span class="ruby-comment cmt"># File lib/classes/config.rb, line 87</span>
 87:         <span class="ruby-keyword kw">def</span> <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">key_string</span>(<span class="ruby-identifier">hash</span>, <span class="ruby-identifier">keys</span>)
 88:             <span class="ruby-keyword kw">return</span> <span class="ruby-keyword kw">false</span> <span class="ruby-keyword kw">if</span> <span class="ruby-operator">!</span> <span class="ruby-identifier">hash</span>.<span class="ruby-identifier">is_a?</span> <span class="ruby-constant">Hash</span>
 89: 
 90:             <span class="ruby-identifier">keys</span> = <span class="ruby-identifier">keys</span>.<span class="ruby-identifier">split</span>(<span class="ruby-value str">'.'</span>)
 91: 
 92:             <span class="ruby-keyword kw">until</span> <span class="ruby-identifier">keys</span>.<span class="ruby-identifier">length</span> <span class="ruby-operator">==</span> <span class="ruby-value">0</span>
 93:                 <span class="ruby-identifier">key</span> = <span class="ruby-identifier">keys</span>.<span class="ruby-identifier">shift</span>
 94: 
 95:                 <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">hash</span>.<span class="ruby-identifier">has_key?</span> <span class="ruby-identifier">key</span>
 96:                     <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">hash</span>[<span class="ruby-identifier">key</span>].<span class="ruby-identifier">is_a?</span> <span class="ruby-constant">Hash</span> <span class="ruby-keyword kw">and</span> <span class="ruby-operator">!</span> <span class="ruby-identifier">keys</span>.<span class="ruby-identifier">empty?</span>
 97:                         <span class="ruby-identifier">hash</span> = <span class="ruby-identifier">hash</span>[<span class="ruby-identifier">key</span>]
 98:                     <span class="ruby-keyword kw">else</span>
 99:                         <span class="ruby-keyword kw">return</span> <span class="ruby-identifier">hash</span>[<span class="ruby-identifier">key</span>]
100:                     <span class="ruby-keyword kw">end</span>
101:                 <span class="ruby-keyword kw">else</span>
102:                     <span class="ruby-keyword kw">break</span>
103:                 <span class="ruby-keyword kw">end</span>
104:             <span class="ruby-keyword kw">end</span>
105: 
106:             <span class="ruby-keyword kw">nil</span>
107:         <span class="ruby-keyword kw">end</span></pre>
					</div>
					
				</div>

				

				
			</div>

		
			<div id="load-method" class="method-detail ">
				<a name="method-c-load"></a>

				<div class="method-heading">
				
					<span class="method-name">load</span><span
						class="method-args">(name)</span>
					<span class="method-click-advice">click to toggle source</span>
				
				</div>

				<div class="method-description">
					
					<p>
Loads configuration files by name
</p>
					

					
					<div class="method-source-code"
						id="load-source">
<pre>
    <span class="ruby-comment cmt"># File lib/classes/config.rb, line 44</span>
44:         <span class="ruby-keyword kw">def</span> <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">load</span>(<span class="ruby-identifier">name</span>)
45:             <span class="ruby-comment cmt"># Look for this config item in the cache</span>
46:             <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">@@cache</span>.<span class="ruby-identifier">has_key?</span>(<span class="ruby-identifier">name</span>)
47:                 <span class="ruby-keyword kw">return</span> <span class="ruby-identifier">@@cache</span>[<span class="ruby-identifier">name</span>]
48:             <span class="ruby-keyword kw">end</span>
49: 
50:             <span class="ruby-identifier">configuration</span>, <span class="ruby-identifier">files</span> = {}, <span class="ruby-constant">Picombo</span><span class="ruby-operator">::</span><span class="ruby-constant">Core</span>.<span class="ruby-identifier">find_file</span>(<span class="ruby-value str">'config'</span>, <span class="ruby-identifier">name</span>, <span class="ruby-keyword kw">false</span>, <span class="ruby-value str">'yaml'</span>)
51: 
52:             <span class="ruby-identifier">files</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">file</span><span class="ruby-operator">|</span>
53:                 <span class="ruby-identifier">configuration</span>.<span class="ruby-identifier">merge!</span> <span class="ruby-constant">YAML</span><span class="ruby-operator">::</span><span class="ruby-identifier">load_file</span>(<span class="ruby-identifier">file</span>)
54:             <span class="ruby-keyword kw">end</span>
55: 
56:             <span class="ruby-comment cmt"># Set the internal cache</span>
57:             <span class="ruby-identifier">@@cache</span>[<span class="ruby-identifier">name</span>] = <span class="ruby-identifier">configuration</span>
58: 
59:             <span class="ruby-identifier">configuration</span>
60:             <span class="ruby-keyword kw">rescue</span> <span class="ruby-constant">Errno</span><span class="ruby-operator">::</span><span class="ruby-constant">ENOENT</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">e</span>
61:             <span class="ruby-comment cmt"># A config file couldn't be loaded...</span>
62:         <span class="ruby-keyword kw">end</span></pre>
					</div>
					
				</div>

				

				
			</div>

		
			<div id="set-method" class="method-detail ">
				<a name="method-c-set"></a>

				<div class="method-heading">
				
					<span class="method-name">set</span><span
						class="method-args">(key, value)</span>
					<span class="method-click-advice">click to toggle source</span>
				
				</div>

				<div class="method-description">
					
					<p>
Used for dynamic config setting. Not implimented yet
</p>
					

					
					<div class="method-source-code"
						id="set-source">
<pre>
    <span class="ruby-comment cmt"># File lib/classes/config.rb, line 65</span>
65:         <span class="ruby-keyword kw">def</span> <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">set</span>(<span class="ruby-identifier">key</span>, <span class="ruby-identifier">value</span>)
66:         <span class="ruby-keyword kw">end</span></pre>
					</div>
					
				</div>

				

				
			</div>

		
		</div>
	

	</div>


	<div id="rdoc-debugging-section-dump" class="debugging-section">
	
		<p>Disabled; run with --debug to generate this.</p>
	
	</div>

	<div id="validator-badges">
		<p><small><a href="http://validator.w3.org/check/referer">[Validate]</a></small></p>
		<p><small>Generated with the <a href="http://deveiate.org/projects/Darkfish-Rdoc/">Darkfish
			Rdoc Generator</a> 1.1.6</small>.</p>
	</div>

</body>
</html>

